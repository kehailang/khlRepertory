<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>我的订单</title>
		<!-- 为移动设备添加 viewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
		<!-- telephone为no -->
		<meta name="format-detection" content="telephone = no">
		<!-- 公共基础样式 -->
		<link rel="stylesheet" type="text/css" href="css/base.css"/>
		<link rel="stylesheet" type="text/css" href="css/swiper.min.css"/>
		<link rel="stylesheet" href="css/order.css">
		<link rel="stylesheet" type="text/css" href="css/dropload.css"/>
		<style type="text/css">
			html,body{height: 100%;}
		</style>		
	</head>
	<body>
		<!--总分区-->
		<div class="wrapper">	
		  	<div class="tabs">
		        <a href="#" hidefocus="true"><span class="active">全部</span></a>
		        <a href="#" hidefocus="true"><span>待付款</span></a>
		        <a href="#" hidefocus="true"><span>待收货</span></a>
		        <a href="#" hidefocus="true"><span>待评价</span></a>
		    </div>
		    <div class="swiper-container content">
		        <div class="swiper-wrapper">
			        <div class="swiper-slide">
		           		<div class="content-slide">
		             	 	<div class="myOrder">
		             	 		<div class="orderList">
		             	 			<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>
		             	 			<div class="product">
		             	 				<a href="javascript:;">
			             	 				<div class="orderImg"><img src="images/orderImg.jpg"/></div>
			             	 				<div class="orderTxt">
			             	 					<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>
			             	 					<p><span>大盒 x1</span></p>
			             	 				</div>	
		             	 				</a>
		             	 			</div>		             	 			
		             	 			<div class="orderBtn">
		             	 				<p class="allSum">总计<span>9.9</span>元 <span>1</span>件商品</p>
		             	 				<div class="btn">
		             	 					<a href="" class="orange">取消订单</a>
		             	 					<a href="javascript:;" class="gray evaluate-click">去评价</a>
		             	 				</div>
		             	 			</div>
		             	 		</div>
		             	 	</div>
		             	 	<div class="myOrder">
		             	 		<div class="orderList">
		             	 			<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>
		             	 			<div class="product">
		             	 				<a href="javascript:;">
			             	 				<div class="orderImg"><img src="images/orderImg.jpg"/></div>
			             	 				<div class="orderTxt">
			             	 					<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>
			             	 					<p><span>大盒 x1</span></p>
			             	 				</div>	
		             	 				</a>
		             	 			</div>		             	 			
		             	 			<div class="orderBtn">
		             	 				<p class="allSum">总计<span>9.9</span>元 <span>1</span>件商品</p>
		             	 				<div class="btn">
		             	 					<a href="" class="gray">确认收货</a>
		             	 				</div>
		             	 			</div>
		             	 		</div>
		             	 	</div>
		           		</div>
		       		</div>
			        <div class="swiper-slide">
		           		<div class="content-slide">
		             	 	<div class="myOrder">
		             	 		<div class="orderList">
		             	 			<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>
		             	 			<div class="product">
		             	 				<a href="javascript:;">
			             	 				<div class="orderImg"><img src="images/orderImg.jpg"/></div>
			             	 				<div class="orderTxt">
			             	 					<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>
			             	 					<p><span>大盒 x1</span></p>
			             	 				</div>	
		             	 				</a>
		             	 			</div>		             	 			
		             	 			<div class="orderBtn">
		             	 				<p class="allSum">总计<span>9.9</span>元 <span>1</span>件商品</p>
		             	 				<div class="btn">
		             	 					<a href="" class="orange">取消订单</a>
		             	 					<a href="" class="gray">去付款</a>
		             	 				</div>
		             	 			</div>
		             	 		</div>
		             	 	</div>
		           		</div>
		       		</div>
			        <div class="swiper-slide">
		           		<div class="content-slide">
		             	 	<div class="myOrder">
		             	 		<div class="orderList">
		             	 			<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>
		             	 			<div class="product">
		             	 				<a href="javascript:;">
			             	 				<div class="orderImg"><img src="images/orderImg.jpg"/></div>
			             	 				<div class="orderTxt">
			             	 					<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>
			             	 					<p><span>大盒 x1</span></p>
			             	 				</div>	
		             	 				</a>
		             	 			</div>		             	 			
		             	 			<div class="orderBtn">
		             	 				<p class="allSum">总计<span>9.9</span>元 <span>1</span>件商品</p>
		             	 				<div class="btn">
		             	 					<a href="" class="orange">取消订单</a>
		             	 					<a href="" class="gray">去付款</a>
		             	 				</div>
		             	 			</div>
		             	 		</div>
		             	 	</div>
		        	    </div>
		       		</div>
			        <div class="swiper-slide">
		           		<div class="content-slide">
		             	 	<div class="myOrder">
		             	 		<div class="orderList">
		             	 			<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>
		             	 			<div class="product">
		             	 				<a href="javascript:;">
			             	 				<div class="orderImg"><img src="images/orderImg.jpg"/></div>
			             	 				<div class="orderTxt">
			             	 					<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>
			             	 					<p><span>大盒 x1</span></p>
			             	 				</div>	
		             	 				</a>
		             	 			</div>		             	 			
		             	 			<div class="orderBtn">
		             	 				<p class="allSum">总计<span>9.9</span>元 <span>1</span>件商品</p>
		             	 				<div class="btn">
		             	 					<a href="" class="orange">取消订单</a>
		             	 					<a href="" class="gray">去付款</a>
		             	 				</div>
		             	 			</div>
		             	 		</div>
		             	 	</div>
	        	    </div>
	       		</div>
		        </div>
		   </div>
		</div>
		<script type="text/javascript" src="js/jquery-2.0.0.min.js" ></script>
		<script src="js/swiperO.min.js" type="text/javascript"></script>
		<script src="js/dropload.js" type="text/javascript" charset="utf-8"></script>
		<script>
			$(function(){
				var itemIndex = 0;
			    var counter = 0;
			    // 每页展示4个
			    var num = 7;
			    var pageStart = 0,pageEnd = 0;
			
			    // dropload
			    $('.swiper-slide').dropload({
			        scrollArea : window,
			        domDown : {
			            domClass   : 'dropload-down',
			            domRefresh : '<div class="dropload-refresh">↑上拉加载更多</div>',
			            domLoad    : '<div class="dropload-load"><span class="loading"></span>加载中...</div>',
			            domNoData  : '<div class="dropload-noData">暂无数据</div>'
			        },
			        loadDownFn : function(me){
			        	console.log('下拉')
			            $.ajax({
			                type: 'GET',
			                url: 'more.json',
			                dataType: 'json',
			                success: function(data){
//			                	$('.lists').empty("")
			                    var result = '';
			                    counter++;
			                    pageEnd = num * counter;
			                    pageStart = pageEnd - num;
			
			                    for(var i = pageStart; i < pageEnd; i++){
			                        result +=   '<div class="myOrder">'
			                        				+'<div class="orderList">'
			                        					+'<p class="size"><span>订单号：1606488479666</span><em>2016/11/22</em></p>'
			                        					+'<div class="product">'
			                        						+'<a href="javascript:;">'
			                        							+'<div class="orderImg"><img src="images/orderImg.jpg"></div>'
			                        							+'<div class="orderTxt">'
			                        								+'<h3><span class="header-txt">喝呵呵玫瑰女性滋补养生泡茶</span><span class="sum">¥9.9</span></h3>'
			                        								+'<p><span>大盒 x1</span></p>'
			                        							+'</div>'
			                        						+'</a>'
			                        					+'</div>'
			                        					+'<div class="orderBtn">'
			                        						+'<p class="allSum">总计<span>'+data.lists[i].title+'</span>元 <span>1</span>件商品</p>'
			                        						+'<div class="btn">'
			                        							+'<a href="javascript:;" class="orange">取消订单</a>'
			                        							+'<a href="javascript:;" class="gray">去付款</a>'
			                        						+'</div>'
			                        					+'</div>'
			                                        +'</div>'
			                                    +'</div>';
			                                    
			                        if((i + 1) >= data.lists.length){
			                            // 锁定
			                            me.lock();
			                            // 无数据
			                            me.noData();
			                            break;
			                        }
			                    }
			                    // 为了测试，延迟1秒加载
			                    setTimeout(function(){
			                        $('.content-slide').append(result);
                						var H=$(".content-slide").eq(0).height()+80;
										$(".swiper-wrapper").css('height', H+'px');
										$(".swiper-slide").css('height', H+'px');			                        
			                        // 每次数据加载完，必须重置
			                        me.resetload();
			                    },1000);
			                },
			                error: function(xhr, type){
			                    alert('Ajax error!');
			                    // 即使加载出错，也得重置
			                    me.resetload();
			                }
			            });
			        },
			        threshold : 50
			    });
			});
		
		var tabsSwiper = new Swiper('.swiper-container',{	
			followFinger : false,
			onSwiperCreated:function(){
				var H=$(".content-slide").eq(0).height()+112;
				$(".swiper-wrapper").css('height', H+'px');
				$(".swiper-slide").css('height', H+'px');
			},
			onSlideChangeStart: function() {
				var H = $(".content-slide").eq(tabsSwiper.activeIndex).height()+112;
				$(".tabs span.active").removeClass('active');
				$(".tabs a").eq(tabsSwiper.activeIndex).find("span").addClass('active');
				$(".swiper-slide").css('height', H + 'px');
				$(".swiper-wrapper").css('height', H + 'px');
			},	
		});
		$(".tabs a").on('touchstart mousedown',function(e){
			e.preventDefault()
			$(".tabs span.active").removeClass('active');
			$(this).find("span").addClass('active');
			tabsSwiper.swipeTo($(this).index());
		});
		</script>
	</body>
</html>